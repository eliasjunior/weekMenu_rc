<ion-header>
  <ion-navbar>
    <ion-title>Ingredient Details</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding class="ingredient">
    <form name="formIng" #formIng="ngForm">
        <ion-list>
            <ion-item>
                <ion-label>
                    Category
                </ion-label>
                <ion-select [(ngModel)]="ingredient.categoryId" required name="category" #category="ngModel"
                            (ngModelChange)="onChangeCat()">
                    <ion-option *ngFor="let category of listCategory" [value]="category._id">
                        {{category.name}}
                    </ion-option>
                    <ion-option [value]="'addNew'">ADD NEW</ion-option>

                </ion-select>
            </ion-item>
            <ion-item *ngIf="ingredient.categoryId === 'addNew'">
                <ion-label floating>Category's name</ion-label>
                <ion-input type="text" [(ngModel)]="newCatName" name="newCategory" #newCategory></ion-input>
            </ion-item>

            <ion-item *ngIf="ingredient.categoryId !== 'addNew' && ingredient._id">
                <ion-label floating>Category's name</ion-label>
                <ion-input type="text" [(ngModel)]="currentCategory.name" name="catName" #catName></ion-input>
            </ion-item>

            <ion-item>
                <ion-label floating>Name</ion-label>
                <ion-input type="text" [(ngModel)]="ingredient.name" name="name" #name></ion-input>
            </ion-item>

            <div class="quantity-block">
                <span >Quantity/Volume/Kg</span>
                <ion-item *ngFor="let t of typeQtdList" radio-group
                          [(ngModel)]="quantity.typeQuantity" name="type" #type="ngModel" required>
                    <ion-label>{{t}}</ion-label>
                    <ion-radio [value]="t"></ion-radio>
                </ion-item>

                <ion-item>
                    <ion-range  min="{{getMin()}}" max="{{getMax()}}" step="{{getStep()}}" [(ngModel)]="quantity.qtd"
                                #qtd="ngModel" name="qtd">
                        <ion-icon color="secondary" range-left small name="remove"></ion-icon>
                        <ion-icon color="secondary" range-right name="add">  {{quantity.qtd}}</ion-icon>
                    </ion-range>
                </ion-item>
            </div>

        </ion-list>
        <button ion-button type="submit"  (click)="actionIngredient()"
                [disabled]="!formIng.form.valid" block >
            Actions
        </button>
    </form>
</ion-content>
